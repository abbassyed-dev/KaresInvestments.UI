{
  "version": 3,
  "sources": ["src/app/layout/service/app.layout.service.ts"],
  "sourcesContent": ["import { Injectable, effect, signal } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport interface AppConfig {\r\n    inputStyle: string;\r\n    colorScheme: string;\r\n    theme: string;\r\n    ripple: boolean;\r\n    menuMode: string;\r\n    scale: number;\r\n}\r\n\r\ninterface LayoutState {\r\n    staticMenuDesktopInactive: boolean;\r\n    overlayMenuActive: boolean;\r\n    profileSidebarVisible: boolean;\r\n    configSidebarVisible: boolean;\r\n    staticMenuMobileActive: boolean;\r\n    menuHoverActive: boolean;\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class LayoutService {\r\n    _config: AppConfig = {\r\n        ripple: false,\r\n        inputStyle: 'outlined',\r\n        menuMode: 'static',\r\n        colorScheme: 'dark',\r\n        theme: 'bootstrap4-dark-blue', //'lara-light-indigo', 'light'\r\n        scale: 14,\r\n    };\r\n\r\n    config = signal<AppConfig>(this._config);\r\n\r\n    state: LayoutState = {\r\n        staticMenuDesktopInactive: true,\r\n        overlayMenuActive: true,\r\n        profileSidebarVisible: false,\r\n        configSidebarVisible: false,\r\n        staticMenuMobileActive: true,\r\n        menuHoverActive: false,\r\n    };\r\n\r\n    private configUpdate = new Subject<AppConfig>();\r\n\r\n    private overlayOpen = new Subject<any>();\r\n\r\n    configUpdate$ = this.configUpdate.asObservable();\r\n\r\n    overlayOpen$ = this.overlayOpen.asObservable();\r\n\r\n    constructor() {\r\n        effect(() => {\r\n            const config = this.config();\r\n            if (this.updateStyle(config)) {\r\n                this.changeTheme();\r\n            }\r\n            this.changeScale(config.scale);\r\n            this.onConfigUpdate();\r\n        });\r\n    }\r\n\r\n    updateStyle(config: AppConfig) {\r\n        return (\r\n            config.theme !== this._config.theme ||\r\n            config.colorScheme !== this._config.colorScheme\r\n        );\r\n    }\r\n\r\n    // onMenuToggle() {\r\n    //     if (this.isOverlay()) {\r\n    //         this.state.overlayMenuActive = !this.state.overlayMenuActive;\r\n    //         if (this.state.overlayMenuActive) {\r\n    //             this.overlayOpen.next(null);\r\n    //         }\r\n    //     }\r\n\r\n    //     if (this.isDesktop()) {\r\n    //         this.state.staticMenuDesktopInactive =\r\n    //             !this.state.staticMenuDesktopInactive;\r\n    //     } else {\r\n    //         this.state.staticMenuMobileActive =\r\n    //             !this.state.staticMenuMobileActive;\r\n\r\n    //         if (this.state.staticMenuMobileActive) {\r\n    //             this.overlayOpen.next(null);\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    showProfileSidebar() {\r\n        this.state.profileSidebarVisible = !this.state.profileSidebarVisible;\r\n        if (this.state.profileSidebarVisible) {\r\n            this.overlayOpen.next(null);\r\n        }\r\n    }\r\n\r\n    showConfigSidebar() {\r\n        this.state.configSidebarVisible = true;\r\n    }\r\n\r\n    isOverlay() {\r\n        return this.config().menuMode === 'overlay';\r\n    }\r\n\r\n    isDesktop() {\r\n        return window.innerWidth > 991;\r\n    }\r\n\r\n    isMobile() {\r\n        return !this.isDesktop();\r\n    }\r\n\r\n    onConfigUpdate() {\r\n        this._config = { ...this.config() };\r\n        this.configUpdate.next(this.config());\r\n    }\r\n\r\n    changeTheme() {\r\n        const config = this.config();\r\n        const themeLink = document.getElementById('theme-css') as HTMLLinkElement;\r\n        const themeLinkHref = themeLink.getAttribute('href')!;\r\n        const newHref = themeLinkHref\r\n            .split('/')\r\n            .map((el) =>\r\n                el == this._config.theme\r\n                    ? (el = config.theme)\r\n                    : el == `theme-${this._config.colorScheme}`\r\n                        ? (el = `theme-${config.colorScheme}`)\r\n                        : el\r\n            )\r\n            .join('/');\r\n\r\n        this.replaceThemeLink(newHref);\r\n    }\r\n    replaceThemeLink(href: string) {\r\n        const id = 'theme-css';\r\n        const themeLink = document.getElementById(id) as HTMLLinkElement;\r\n        const cloneLinkElement = themeLink.cloneNode(true) as HTMLLinkElement;\r\n\r\n        cloneLinkElement.setAttribute('href', href);\r\n        cloneLinkElement.setAttribute('id', id + '-clone');\r\n\r\n        themeLink.parentNode!.insertBefore(\r\n            cloneLinkElement,\r\n            themeLink.nextSibling\r\n        );\r\n        cloneLinkElement.addEventListener('load', () => {\r\n            themeLink.remove();\r\n            cloneLinkElement.setAttribute('id', id);\r\n        });\r\n    }\r\n\r\n    changeScale(value: number) {\r\n        document.documentElement.style.fontSize = `${value}px`;\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;AAwBM,IAAO,gBAAP,MAAO,eAAa;EA6BtB,cAAA;AA5BA,SAAA,UAAqB;MACjB,QAAQ;MACR,YAAY;MACZ,UAAU;MACV,aAAa;MACb,OAAO;;MACP,OAAO;;AAGX,SAAA,SAAS,OAAkB,KAAK,OAAO;AAEvC,SAAA,QAAqB;MACjB,2BAA2B;MAC3B,mBAAmB;MACnB,uBAAuB;MACvB,sBAAsB;MACtB,wBAAwB;MACxB,iBAAiB;;AAGb,SAAA,eAAe,IAAI,QAAO;AAE1B,SAAA,cAAc,IAAI,QAAO;AAEjC,SAAA,gBAAgB,KAAK,aAAa,aAAY;AAE9C,SAAA,eAAe,KAAK,YAAY,aAAY;AAGxC,WAAO,MAAK;AACR,YAAM,SAAS,KAAK,OAAM;AAC1B,UAAI,KAAK,YAAY,MAAM,GAAG;AAC1B,aAAK,YAAW;MACpB;AACA,WAAK,YAAY,OAAO,KAAK;AAC7B,WAAK,eAAc;IACvB,CAAC;EACL;EAEA,YAAY,QAAiB;AACzB,WACI,OAAO,UAAU,KAAK,QAAQ,SAC9B,OAAO,gBAAgB,KAAK,QAAQ;EAE5C;;;;;;;;;;;;;;;;;;;EAuBA,qBAAkB;AACd,SAAK,MAAM,wBAAwB,CAAC,KAAK,MAAM;AAC/C,QAAI,KAAK,MAAM,uBAAuB;AAClC,WAAK,YAAY,KAAK,IAAI;IAC9B;EACJ;EAEA,oBAAiB;AACb,SAAK,MAAM,uBAAuB;EACtC;EAEA,YAAS;AACL,WAAO,KAAK,OAAM,EAAG,aAAa;EACtC;EAEA,YAAS;AACL,WAAO,OAAO,aAAa;EAC/B;EAEA,WAAQ;AACJ,WAAO,CAAC,KAAK,UAAS;EAC1B;EAEA,iBAAc;AACV,SAAK,UAAU,mBAAK,KAAK,OAAM;AAC/B,SAAK,aAAa,KAAK,KAAK,OAAM,CAAE;EACxC;EAEA,cAAW;AACP,UAAM,SAAS,KAAK,OAAM;AAC1B,UAAM,YAAY,SAAS,eAAe,WAAW;AACrD,UAAM,gBAAgB,UAAU,aAAa,MAAM;AACnD,UAAM,UAAU,cACX,MAAM,GAAG,EACT,IAAI,CAAC,OACF,MAAM,KAAK,QAAQ,QACZ,KAAK,OAAO,QACb,MAAM,SAAS,KAAK,QAAQ,WAAW,KAClC,KAAK,SAAS,OAAO,WAAW,KACjC,EAAE,EAEf,KAAK,GAAG;AAEb,SAAK,iBAAiB,OAAO;EACjC;EACA,iBAAiB,MAAY;AACzB,UAAM,KAAK;AACX,UAAM,YAAY,SAAS,eAAe,EAAE;AAC5C,UAAM,mBAAmB,UAAU,UAAU,IAAI;AAEjD,qBAAiB,aAAa,QAAQ,IAAI;AAC1C,qBAAiB,aAAa,MAAM,KAAK,QAAQ;AAEjD,cAAU,WAAY,aAClB,kBACA,UAAU,WAAW;AAEzB,qBAAiB,iBAAiB,QAAQ,MAAK;AAC3C,gBAAU,OAAM;AAChB,uBAAiB,aAAa,MAAM,EAAE;IAC1C,CAAC;EACL;EAEA,YAAY,OAAa;AACrB,aAAS,gBAAgB,MAAM,WAAW,GAAG,KAAK;EACtD;;;uBArIS,gBAAa;IAAA;EAAA;;4EAAb,gBAAa,SAAb,eAAa,WAAA,YAFV,OAAM,CAAA;EAAA;;",
  "names": []
}
